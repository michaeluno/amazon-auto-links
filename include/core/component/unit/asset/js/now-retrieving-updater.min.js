/* Now-Retrieving Updater 1.0.0 */
(function($){$(document).ready(function(){processNowRetrieving(this);});$('body').on('aal_ajax_loaded_unit',function(event){processNowRetrieving(event.target);});function processNowRetrieving(subject){var _oSpinner=$('<img src="'+aalNowRetrieving.spinnerURL+'" />');_oSpinner.css({margin:'0 0.5em','vertical-align':'middle','display':'inline-block'});var _aItems={};var _iCount=0;$(subject).find('.now-retrieving').each(function(index,element){var _aArguments=$(this).data();if('undefined'===typeof _aArguments.asin){return true;}
var _sKey=_aArguments.asin+'|'+_aArguments.locale+'|'+_aArguments.currency+'|'+_aArguments.language;if('undefined'===typeof _aItems[_sKey]){_aItems[_sKey]={};}
_aItems[_sKey][_aArguments.context]=_aArguments;_iCount++;$(this).append(_oSpinner);});if(!_iCount){return;}
$.ajax({type:"post",dataType:'json',url:aalNowRetrieving.ajaxURL,data:{action:aalNowRetrieving.actionHookSuffix,aal_nonce:aalNowRetrieving.nonce,items:_aItems},success:function(response){if(response.success){$.each(response.result,function(iIndex,aItem){if('undefined'===typeof aItem.output){return true;}
$(subject).find('.now-retrieving'
+'[data-asin='+aItem.asin+']'
+'[data-context='+aItem.context+']'
+'[data-locale='+aItem.locale+']'
+'[data-currency='+aItem.currency+']'
+'[data-language='+aItem.language+']'
+'[data-tag='+aItem.tag+']').replaceWith($(aItem.output));});}else{}},complete:function(){}});}}(jQuery));;